var e=Object.defineProperty,t=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);import{z as n,d as r,r as a,A as o,B as s,C as i,c as l,w as c,i as u,D as f,o as v,a as p,u as d,e as h,f as g,t as m,p as y,g as w,E as b,s as _,n as C}from"./index-BJG-Pqj9.js";import{_ as x}from"./_plugin-vue_export-helper.BCo6x5W8.js";const S=[];for(let P=0;P<256;++P)S.push((P+256).toString(16).slice(1));let k;const M=new Uint8Array(16);const R={randomUUID:"undefined"!=typeof crypto&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function I(e,t,n){var r;if(R.randomUUID&&!e)return R.randomUUID();const a=(e=e||{}).random??(null==(r=e.rng)?void 0:r.call(e))??function(){if(!k){if("undefined"==typeof crypto||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");k=crypto.getRandomValues.bind(crypto)}return k(M)}();if(a.length<16)throw new Error("Random bytes length must be >= 16");return a[6]=15&a[6]|64,a[8]=63&a[8]|128,function(e,t=0){return(S[e[t+0]]+S[e[t+1]]+S[e[t+2]]+S[e[t+3]]+"-"+S[e[t+4]]+S[e[t+5]]+"-"+S[e[t+6]]+S[e[t+7]]+"-"+S[e[t+8]]+S[e[t+9]]+"-"+S[e[t+10]]+S[e[t+11]]+S[e[t+12]]+S[e[t+13]]+S[e[t+14]]+S[e[t+15]]).toLowerCase()}(a)}function T(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var L,A,D,O={exports:{}};L=O,A="object"==typeof window&&!!window.document,function(e,t){var n=function(){},r=function(e){return"number"==typeof e},a=function(e){return JSON.stringify(e)},o=function(e){return new G(e)},s=o.LM="2025-01-11 09:28",i="https://github.com/xiangyuecn/Recorder",l="Recorder",c="getUserMedia",u="srcSampleRate",f="sampleRate",v="bitRate",p="catch",d=e[l];if(d&&d.LM==s)d.CLog(d.i18n.$T("K8zP::重复导入{1}",0,l),3);else{o.IsOpen=function(){var e=o.Stream;if(e){var t=I(e)[0];if(t){var n=t.readyState;return"live"==n||n==t.LIVE}}return!1},o.BufferSize=4096,o.Destroy=function(){for(var e in T(l+" Destroy"),M(),h)h[e]()};var h={};o.BindDestroy=function(e,t){h[e]=t},o.Support=function(){if(!t)return!1;var e=navigator.mediaDevices||{};return e[c]||(e=navigator)[c]||(e[c]=e.webkitGetUserMedia||e.mozGetUserMedia||e.msGetUserMedia),!!e[c]&&(o.Scope=e,!!o.GetContext())},o.GetContext=function(e){if(!t)return null;var n=window.AudioContext;if(n||(n=window.webkitAudioContext),!n)return null;var r=o.Ctx,a=0;return r||(r=o.Ctx=new n,a=1,o.NewCtxs=o.NewCtxs||[],o.BindDestroy("Ctx",(function(){var e=o.Ctx;e&&e.close&&(g(e),o.Ctx=0);var t=o.NewCtxs;o.NewCtxs=[];for(var n=0;n<t.length;n++)g(t[n])}))),e&&r.close&&(a||(r._useC||g(r),r=new n),r._useC=1,o.NewCtxs.push(r)),r},o.CloseNewCtx=function(e){if(e&&e.close){g(e);for(var t=o.NewCtxs||[],n=t.length,r=0;r<t.length;r++)if(t[r]==e){t.splice(r,1);break}T(P("mSxV::剩{1}个GetContext未close",0,n+"-1="+t.length),t.length?3:0)}};var g=function(e){if(e&&e.close&&!e._isC&&(e._isC=1,"closed"!=e.state))try{e.close()}catch(t){T("ctx close err",1,t)}},m=o.ResumeCtx=function(e,t,n,r){var a=0,o=0,s=0,i=0,l="EventListener",c="ResumeCtx ",u=function(t,c){o&&f(),a||(a=1,t&&r(t,i),c&&n(i)),c&&(!e._LsSC&&e["add"+l]&&e["add"+l]("statechange",v),e._LsSC=1,s=1)},f=function(e){if(!e||!o){o=e?1:0;for(var t=["focus","mousedown","mouseup","touchstart","touchend"],n=0;n<t.length;n++)window[(e?"add":"remove")+l](t[n],v,!0)}},v=function(){var n=e.state,r=y(n);if(!a&&!t(r?++i:i))return u();r?(s&&T(c+"sc "+n,3),f(1),e.resume().then((function(){s&&T(c+"sc "+e.state),u(0,1)}))[p]((function(t){T(c+"error",1,t),y(e.state)||u(t.message||"error")}))):"closed"==n?(s&&!e._isC&&T(c+"sc "+n,1),u("ctx closed")):u(0,1)};v()},y=o.CtxSpEnd=function(e){return"suspended"==e||"interrupted"==e},w=function(e){var t=e.state,n="ctx.state="+t;return y(t)&&(n+=P("nMIy::（注意：ctx不是running状态，rec.open和start至少要有一个在用户操作(触摸、点击等)时进行调用，否则将在rec.start时尝试进行ctx.resume，可能会产生兼容性问题(仅iOS)，请参阅文档中runningContext配置）")),n},b="ConnectEnableWebM";o[b]=!0;var _="ConnectEnableWorklet";o[_]=!1;var C=function(e){var t=e.BufferSize||o.BufferSize,n=e.Stream,r=n._c,s=r[f],i={},c=I(n)[0],u=null,v="";if(c&&c.getSettings){var d=(u=c.getSettings())[f];d&&d!=s&&(v=P("eS8i::Stream的采样率{1}不等于{2}，将进行采样率转换（注意：音质不会变好甚至可能变差），主要在移动端未禁用回声消除时会产生此现象，浏览器有回声消除时可能只会返回16k采样率的音频数据，",0,d,s))}n._ts=u,T(v+"Stream TrackSet: "+a(u),v?3:0);var h,g,y,w=function(e){var t=n._m=r.createMediaStreamSource(n),a=r.destination,o="createMediaStreamDestination";r[o]&&(a=n._d=r[o]()),t.connect(e),e.connect(a)},C="",x=n._call,M=function(e,t){for(var n in x){if(t!=s){i.index=0;var r=(i=o.SampleData([e],t,s,i,{_sum:1})).data,a=i._sum}else{i={};for(var l=e.length,c=(r=new Int16Array(l),a=0,0);c<l;c++){var u=Math.max(-1,Math.min(1,e[c]));u=u<0?32768*u:32767*u,r[c]=u,a+=Math.abs(u)}}for(var f in x)x[f](r,a);return}},R="ScriptProcessor",L="audioWorklet",A=l+" "+L,O="RecProc",U="MediaRecorder",E=U+".WebM.PCM",z=r.createScriptProcessor||r.createJavaScriptNode,F=P("ZGlf::。由于{1}内部1秒375次回调，在移动端可能会有性能问题导致回调丢失录音变短，PC端无影响，暂不建议开启{1}。",0,L),G=function(){g=n.isWorklet=!1,S(n),T(P("7TU0::Connect采用老的{1}，",0,R)+N.get(o[_]?P("JwCL::但已设置{1}尝试启用{2}",2):P("VGjB::可设置{1}尝试启用{2}",2),[l+"."+_+"=true",L])+C+F,3);var e=n._p=z.call(r,t,1,1);w(e),e.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);M(t,s)}},W=function(){h=n.isWebM=!1,k(n),g=n.isWorklet=!z||o[_];var e=window.AudioWorkletNode;if(g&&r[L]&&e){var a=function(){var e=function(e){return e.toString().replace(/^function|DEL_/g,"").replace(/\$RA/g,A)},t="class "+O+" extends AudioWorkletProcessor{";return t+="constructor "+e((function(e){DEL_super(e);var t=this,n=e.processorOptions.bufferSize;t.bufferSize=n,t.buffer=new Float32Array(2*n),t.pos=0,t.port.onmessage=function(e){e.data.kill&&(t.kill=!0,$C.log("$RA kill call"))},$C.log("$RA .ctor call",e)})),t+="process "+e((function(e,t,n){var r=this,a=r.bufferSize,o=r.buffer,s=r.pos;if((e=(e[0]||[])[0]||[]).length){o.set(e,s);var i=~~((s+=e.length)/a)*a;if(i){this.port.postMessage({val:o.slice(0,i)});var l=o.subarray(i,s);(o=new Float32Array(2*a)).set(l),s=l.length,r.buffer=o}r.pos=s}return!r.kill})),t=(t+='}try{registerProcessor("'+O+'", '+O+')}catch(e){$C.error("'+A+' Reg Error",e)}').replace(/\$C\./g,"console."),"data:text/javascript;base64,"+btoa(unescape(encodeURIComponent(t)))},i=function(){return g&&n._na},c=n._na=function(){""!==y&&(clearTimeout(y),y=setTimeout((function(){y=0,i()&&(T(P("MxX1::{1}未返回任何音频，恢复使用{2}",0,L,R),3),z&&G())}),500))},u=function(){if(i()){var a=n._n=new e(r,O,{processorOptions:{bufferSize:t}});w(a),a.port.onmessage=function(e){y&&(clearTimeout(y),y=""),i()?M(e.data.val,s):g||T(P("XUap::{1}多余回调",0,L),3)},T(P("yOta::Connect采用{1}，设置{2}可恢复老式{3}",0,L,l+"."+_+"=false",R)+C+F,3)}},f=function(){if(i())if(r[O])u();else{var e=a();r[L].addModule(e).then((function(e){i()&&(r[O]=1,u(),y&&c())}))[p]((function(e){T(L+".addModule Error",1,e),i()&&G()}))}};m(r,(function(){return i()}),f,f)}else G()};!function(){var e=window[U],r="ondataavailable",a="audio/webm; codecs=pcm";h=n.isWebM=o[b];var s=e&&r in e.prototype&&e.isTypeSupported(a);if(C=s?"":P("VwPd::（此浏览器不支持{1}）",0,E),h&&s){var i=function(){return h&&n._ra};n._ra=function(){""!==y&&(clearTimeout(y),y=setTimeout((function(){i()&&(T(P("vHnb::{1}未返回任何音频，降级使用{2}",0,U,L),3),W())}),500))};var c=Object.assign({mimeType:a},o.ConnectWebMOptions),u=n._r=new e(n,c),f=n._rd={};u[r]=function(e){var t=new FileReader;t.onloadend=function(){if(i()){var e=D(new Uint8Array(t.result),f);if(!e)return;if(-1==e)return void W();y&&(clearTimeout(y),y=""),M(e,f.webmSR)}else h||T(P("O9P7::{1}多余回调",0,U),3)},t.readAsArrayBuffer(e.data)};try{u.start(~~(t/48)),T(P("LMEm::Connect采用{1}，设置{2}可恢复使用{3}或老式{4}",0,E,l+"."+b+"=false",L,R))}catch(v){T("mr start err",1,v),W()}}else W()}()},x=function(e){e._na&&e._na(),e._ra&&e._ra()},S=function(e){e._na=null,e._n&&(e._n.port.postMessage({kill:!0}),e._n.disconnect(),e._n=null)},k=function(e){if(e._ra=null,e._r){try{e._r.stop()}catch(t){T("mr stop err",1,t)}e._r=null}},M=function(e){var t=(e=e||o)==o,n=e.Stream;n&&(n._m&&(n._m.disconnect(),n._m=null),!n._RC&&n._c&&o.CloseNewCtx(n._c),n._RC=null,n._c=null,n._d&&(R(n._d.stream),n._d=null),n._p&&(n._p.disconnect(),n._p.onaudioprocess=n._p=null),S(n),k(n),t&&R(n)),e.Stream=0},R=o.StopS_=function(e){for(var t=I(e),n=0;n<t.length;n++){var r=t[n];r.stop&&r.stop()}e.stop&&e.stop()},I=function(e){var t=0,n=0,r=[];e.getAudioTracks&&(t=e.getAudioTracks(),n=e.getVideoTracks()),t||(t=e.audioTracks,n=e.videoTracks);for(var a=0,o=t?t.length:0;a<o;a++)r.push(t[a]);for(a=0,o=n?n.length:0;a<o;a++)r.push(n[a]);return r};o.SampleData=function(e,t,n,r,a){var s="SampleData";r||(r={});var i,l=r.index||0,c=r.offset||0,u=r.raisePrev||0,f=r.filter;f&&f.fn&&(f.sr&&f.sr!=t||f.srn&&f.srn!=n)&&(f=null,T(P("d48C::{1}的filter采样率变了，重设滤波",0,s),3)),f||(f=n<=t?{fn:(i=n>3*t/4?0:n/2*3/4)?o.IIRFilter(!0,t,i):0}:{fn:(i=t>3*n/4?0:t/2*3/4)?o.IIRFilter(!0,n,i):0}),f.sr=t,f.srn=n;var v=f.fn,p=r.frameNext||[];a||(a={});var d=a.frameSize||1;a.frameType&&(d="mp3"==a.frameType?1152:1);var h=a._sum,g=0,m=e.length;l>m+1&&T(P("tlbC::{1}似乎传入了未重置chunk {2}",0,s,l+">"+m),3);for(var y=0,w=l;w<m;w++)y+=e[w].length;var b=t/n;if(b>1)y=Math.max(0,y-Math.floor(c)),y=Math.floor(y/b);else if(b<1){var _=1/b;y=Math.floor(y*_)}y+=p.length;var C=new Int16Array(y),x=0;for(w=0;w<p.length;w++)C[x]=p[w],x++;for(;l<m;l++){var S=e[l],k=S instanceof Float32Array,M=(w=c,S.length),R=v&&v.Embed,I=0,L=0,A=0,D=0;if(b<1){for(var O=x+w,U=u,E=0;E<M;E++){var z=S[E];k&&(z=(z=Math.max(-1,Math.min(1,z)))<0?32768*z:32767*z);var N=Math.floor(O);O+=_;for(var F=Math.floor(O),G=(z-U)/(F-N),W=1;N<F;N++,W++){var B=Math.floor(U+W*G);R?(A=B,D=R.b0*A+R.b1*R.x1+R.b0*R.x2-R.a1*R.y1-R.a2*R.y2,R.x2=R.x1,R.x1=A,R.y2=R.y1,R.y1=D,B=D):B=v?v(B):B,B>32767?B=32767:B<-32768&&(B=-32768),h&&(g+=Math.abs(B)),C[N]=B,x++}U=u=z,w+=_}c=w%1}else{E=0;for(var j=0;E<M;E++,j++)if(j<M&&(z=S[j],k&&(z=(z=Math.max(-1,Math.min(1,z)))<0?32768*z:32767*z),R?(A=z,D=R.b0*A+R.b1*R.x1+R.b0*R.x2-R.a1*R.y1-R.a2*R.y2,R.x2=R.x1,R.x1=A,R.y2=R.y1,R.y1=D):D=v?v(z):z),I=L,L=D,0!=j){var V=Math.floor(w);if(E==V){var $=I+((Math.ceil(w)<M?L:I)-I)*(w-V);$>32767?$=32767:$<-32768&&($=-32768),h&&(g+=Math.abs($)),C[x]=$,x++,w+=b}}else E--;c=Math.max(0,w-M)}}b<1&&x+1==y&&(y--,C=new Int16Array(C.buffer.slice(0,2*y))),x-1!=y&&x!=y&&T(s+" idx:"+x+" != size:"+y,3),p=null;var Q=y%d;if(Q>0){var q=2*(y-Q);p=new Int16Array(C.buffer.slice(q)),C=new Int16Array(C.buffer.slice(0,q))}var J={index:l,offset:c,raisePrev:u,filter:f,frameNext:p,sampleRate:n,data:C};return h&&(J._sum=g),J},o.IIRFilter=function(e,t,n){var r=2*Math.PI*n/t,a=Math.sin(r),o=Math.cos(r),s=a/2,i=1+s,l=-2*o/i,c=(1-s)/i;if(e)var u=(1-o)/2/i,f=(1-o)/i;else u=(1+o)/2/i,f=-(1+o)/i;var v=0,p=0,d=0,h=0,g=0,m=function(e){return d=u*e+f*v+u*p-l*h-c*g,p=v,v=e,g=h,h=d,d};return m.Embed={x1:0,x2:0,y1:0,y2:0,b0:u,b1:f,a1:l,a2:c},m},o.PowerLevel=function(e,t){var n=e/t||0;return n<1251?Math.round(n/1250*10):Math.round(Math.min(100,Math.max(0,100*(1+Math.log(n/1e4)/Math.log(10)))))},o.PowerDBFS=function(e){var t=Math.max(.1,e||0),n=32767;return t=Math.min(t,n),t=20*Math.log(t/n)/Math.log(10),Math.max(-100,Math.round(t))},o.CLog=function(e,t){if("object"==typeof console){var n=new Date,a=("0"+n.getMinutes()).substr(-2)+":"+("0"+n.getSeconds()).substr(-2)+"."+("00"+n.getMilliseconds()).substr(-3),s=this&&this.envIn&&this.envCheck&&this.id,i=["["+a+" "+l+(s?":"+s:"")+"]"+e],c=arguments,u=o.CLog,f=2,v=u.log||console.log;for(r(t)?v=1==t?u.error||console.error:3==t?u.warn||console.warn:v:f=1;f<c.length;f++)i.push(c[f]);L?v&&v("[IsLoser]"+i[0],i.length>1?i:""):v.apply(console,i)}};var T=function(){o.CLog.apply(this,arguments)},L=!0;try{L=!console.log.apply}catch(W){}var A=0;o.Sync={O:9,C:9},o.prototype=G.prototype={CLog:T,_streamStore:function(){return this.set.sourceStream?this:o},_streamGet:function(){return this._streamStore().Stream},_streamCtx:function(){var e=this._streamGet();return e&&e._c},open:function(e,r){var l=this,u=l.set,v=l._streamStore(),d=0;e=e||n;var h=function(e,t){t=!!t,l.CLog(P("5tWi::录音open失败：")+e+",isUserNotAllow:"+t,1),d&&o.CloseNewCtx(d),r&&r(e,t)};l._streamTag=c;var g=function(){l.CLog("open ok, id:"+l.id+" stream:"+l._streamTag),e(),l._SO=0},m=v.Sync,y=++m.O,b=m.C;l._O=l._O_=y,l._SO=l._S;var _=function(){if(b!=m.C||!l._O){var e=P("dFm8::open被取消");return y==m.O?l.close():e=P("VtJO::open被中断"),h(e),!0}};if(t){var x=l.envCheck({envName:"H5",canProcess:!0});if(x)h(P("A5bm::不能录音：")+x);else{var S,k=function(){(S=u.runningContext)||(S=d=o.GetContext(!0))};if(u.sourceStream){if(l._streamTag="set.sourceStream",!o.GetContext())return void h(P("1iU7::不支持此浏览器从流中获取录音"));k(),M(v);var R=l.Stream=u.sourceStream;R._c=S,R._RC=u.runningContext,R._call={};try{C(v)}catch(W){return M(v),void h(P("BTW2::从流中打开录音失败：")+W.message)}g()}else{var I=function(e,t){try{window.top.a}catch(W){return void h(P("Nclz::无权录音(跨域，请尝试给iframe添加麦克风访问策略，如{1})",0,'allow="camera;microphone"'))}T(1,e)&&(/Found/i.test(e)?h(t+P("jBa9::，无可用麦克风")):h(t))},T=function(e,t){if(/Permission|Allow/i.test(t))e&&h(P("gyO5::用户拒绝了录音权限"),!0);else{if(!1!==window.isSecureContext)return 1;e&&h(P("oWNo::浏览器禁止不安全页面录音，可开启https解决"))}};if(o.IsOpen())g();else if(o.Support()){k();var L,A,D=function(e){setTimeout((function(){e._call={};var t=o.Stream;t&&(M(),e._call=t._call),o.Stream=e,e._c=S,e._RC=u.runningContext,_()||(o.IsOpen()?(t&&l.CLog(P("upb8::发现同时多次调用open"),1),C(v),g()):h(P("Q1GA::录音功能无效：无音频流")))}),100)},O=function(e){var t=e.name||e.message||e.code+":"+e,n="";1==U&&T(0,t)&&(n=P("KxE2::，将尝试禁用回声消除后重试"));var r=P("xEQR::请求录音权限错误"),a=P("bDOG::无法录音：");l.CLog(r+n+"|"+e,n||A?3:1,e),n?(L=t,A=e,E(1)):A?(l.CLog(r+"|"+A,1,A),I(L,a+A)):I(t,a+e)},U=0,E=function(e){U++;var t="audioTrackSet",n="autoGainControl",r="echoCancellation",v="noiseSuppression",d=t+":{"+r+","+v+","+n+"}",h=JSON.parse(a(u[t]||!0));l.CLog("open... "+U+" "+t+":"+a(h)),e&&("object"!=typeof h&&(h={}),h[n]=!1,h[r]=!1,h[v]=!1),h[f]&&l.CLog(P("IjL3::注意：已配置{1}参数，可能会出现浏览器不能正确选用麦克风、移动端无法启用回声消除等现象",0,t+"."+f),3);var g={audio:h,video:u.videoTrackSet||!1};try{var m=o.Scope[c](g,D,O)}catch(W){l.CLog(c,3,W),g={audio:!0,video:!1},m=o.Scope[c](g,D,O)}l.CLog(c+"("+a(g)+") "+w(S)+P("RiWe::，未配置 {1} 时浏览器可能会自动启用回声消除，移动端未禁用回声消除时可能会降低系统播放音量（关闭录音后可恢复）和仅提供16k采样率的音频流（不需要回声消除时可明确配置成禁用来获得48k高音质的流），请参阅文档中{2}配置",0,d,t)+"("+i+") LM:"+s+" UA:"+navigator.userAgent),m&&m.then&&m.then(D)[p](O)};E()}else I("",P("COxc::此浏览器不支持录音"))}}}else h(P.G("NonBrowser-1",["open"])+P("EMJq::，可尝试使用RecordApp解决方案")+"("+i+"/tree/master/app-support-sample)")},close:function(e){e=e||n;var t=this,r=t._streamStore();t._stop();var a=" stream:"+t._streamTag,o=r.Sync;if(t._O=0,t._O_!=o.O)return t.CLog(P("hWVz::close被忽略（因为同时open了多个rec，只有最后一个会真正close）")+a,3),void e();o.C++,M(r),t.CLog("close,"+a),e()},mock:function(e,t){var n=this;return n._stop(),n.isMock=1,n.mockEnvInfo=null,n.buffers=[e],n.recSize=e.length,n._setSrcSR(t),n._streamTag="mock",n},_setSrcSR:function(e){var t=this,n=t.set,r=n[f];r>e?n[f]=e:r=0,t[u]=e,t.CLog(u+": "+e+" set."+f+": "+n[f]+(r?" "+P("UHvm::忽略")+": "+r:""),r?3:0)},envCheck:function(e){var t,n=this,r=n.set,a="CPU_BE";if(t||o[a]||"function"!=typeof Int8Array||new Int8Array(new Int32Array([1]).buffer)[0]||(F(a),t=P("Essp::不支持{1}架构",0,a)),!t){var s=r.type,i=n[s+"_envCheck"];r.takeoffEncodeChunk&&(i?e.canProcess||(t=P("7uMV::{1}环境不支持实时处理",0,e.envName)):t=P("2XBl::{1}类型不支持设置takeoffEncodeChunk",0,s)+(n[s]?"":P("LG7e::(未加载编码器)"))),!t&&i&&(t=n[s+"_envCheck"](e,r))}return t||""},envStart:function(e,t){var n=this,r=n.set;if(n.isMock=e?1:0,n.mockEnvInfo=e,n.buffers=[],n.recSize=0,e&&(n._streamTag="env$"+e.envName),n.state=1,n.envInLast=0,n.envInFirst=0,n.envInFix=0,n.envInFixTs=[],n._setSrcSR(t),n.engineCtx=0,n[r.type+"_start"]){var a=n.engineCtx=n[r.type+"_start"](r);a&&(a.pcmDatas=[],a.pcmSize=0)}},envResume:function(){this.envInFixTs=[]},envIn:function(e,t){var n=this,r=n.set,a=n.engineCtx;if(1==n.state){var s=n[u],i=e.length,l=o.PowerLevel(t,i),c=n.buffers,v=c.length;c.push(e);var p=c,d=v,h=Date.now(),g=Math.round(i/s*1e3);n.envInLast=h,1==n.buffers.length&&(n.envInFirst=h-g);var m=n.envInFixTs;m.splice(0,0,{t:h,d:g});for(var y=h,w=0,b=0;b<m.length;b++){var _=m[b];if(h-_.t>3e3){m.length=b;break}y=_.t,w+=_.d}var C=m[1],x=h-y;if(x-w>x/3&&(C&&x>1e3||m.length>=6)){var S=h-C.t-g;if(S>g/5){var k=!r.disableEnvInFix;if(n.CLog("["+h+"]"+N.get(P(k?"4Kfd::补偿{1}ms":"bM5i::未补偿{1}ms",1),[S]),3),n.envInFix+=S,k){var M=new Int16Array(S*s/1e3);i+=M.length,c.push(M)}}}var R=n.recSize,I=i,T=R+I;if(n.recSize=T,a){var L=o.SampleData(c,s,r[f],a.chunkInfo);a.chunkInfo=L,T=(R=a.pcmSize)+(I=L.data.length),a.pcmSize=T,c=a.pcmDatas,v=c.length,c.push(L.data),s=L[f]}var A=Math.round(T/s*1e3),D=c.length,O=p.length,U=function(){for(var e=E?0:-I,t=null==c[0],o=v;o<D;o++){var s=c[o];null==s?t=1:(e+=s.length,a&&s.length&&n[r.type+"_encode"](a,s))}if(t&&a)for(o=d,p[0]&&(o=0);o<O;o++)p[o]=null;t&&(e=E?I:0,c[0]=null),a?a.pcmSize+=e:n.recSize+=e},E=0,z="rec.set.onProcess";try{E=!0===(E=r.onProcess(c,l,A,s,v,U))}catch(W){console.error(z+P("gFUF::回调出错是不允许的，需保证不会抛异常"),W)}var F=Date.now()-h;if(F>10&&n.envInFirst-h>1e3&&n.CLog(z+P("2ghS::低性能，耗时{1}ms",0,F),3),E){var G=0;for(b=v;b<D;b++)null==c[b]?G=1:c[b]=new Int16Array(0);G?n.CLog(P("ufqH::未进入异步前不能清除buffers"),3):a?a.pcmSize-=I:n.recSize-=I}else U()}else n.state||n.CLog("envIn at state=0",3)},start:function(){var e=this,t=1;if(e.set.sourceStream?e.Stream||(t=0):o.IsOpen()||(t=0),t){var n=e._streamCtx();if(e.CLog(P("kLDN::start 开始录音，")+w(n)+" stream:"+e._streamTag),e._stop(),e.envStart(null,n[f]),e.state=3,e._SO&&e._SO+1!=e._S)e.CLog(P("Bp2y::start被中断"),3);else{e._SO=0;var r=function(){3==e.state&&(e.state=1,e.resume())},a="AudioContext resume: ";e._streamGet()._call[e.id]=function(){e.CLog(a+n.state+"|stream ok"),r()},m(n,(function(t){return t&&e.CLog(a+"wait..."),3==e.state}),(function(t){t&&e.CLog(a+n.state),r()}),(function(t){e.CLog(a+n.state+P("upkE::，可能无法录音：")+t,1),r()}))}}else e.CLog(P("6WmN::start失败：未open"),1)},pause:function(){var e=this,t=e._streamGet();e.state&&(e.state=2,e.CLog("pause"),t&&delete t._call[e.id])},resume:function(){var e=this,t=e._streamGet(),n="resume",r=n+"(wait ctx)";if(3==e.state)e.CLog(r);else if(e.state){e.state=1,e.CLog(n),e.envResume(),t&&(t._call[e.id]=function(t,n){1==e.state&&e.envIn(t,n)},x(t));var a=e._streamCtx();a&&m(a,(function(t){return t&&e.CLog(r+"..."),1==e.state}),(function(n){n&&e.CLog(r+a.state),x(t)}),(function(t){e.CLog(r+a.state+"[err]"+t,1)}))}},_stop:function(e){var t=this,n=t.set;t.isMock||t._S++,t.state&&(t.pause(),t.state=0),!e&&t[n.type+"_stop"]&&(t[n.type+"_stop"](t.engineCtx),t.engineCtx=0)},stop:function(e,t,n){var r,a=this,c=a.set,v=a.envInLast-a.envInFirst,p=v&&a.buffers.length;a.CLog(P("Xq4s::stop 和start时差:")+(v?v+"ms "+P("3CQP::补偿:")+a.envInFix+"ms envIn:"+p+" fps:"+(p/v*1e3).toFixed(1):"-")+" stream:"+a._streamTag+" ("+i+") LM:"+s);var d=function(){a._stop(),n&&a.close()},h=function(e){a.CLog(P("u8JG::结束录音失败：")+e,1),t&&t(e),d()},g=function(t,n,s){var i="blob",u="arraybuffer",f="dataType",v="DefaultDataType",p=a[f]||o[v]||i,g=f+"="+p,m=t instanceof ArrayBuffer,y=0,w=m?t.byteLength:t.size;if(p==u?m||(y=1):p==i?"function"!=typeof Blob?y=P.G("NonBrowser-1",[g])+P("1skY::，请设置{1}",0,l+"."+v+'="'+u+'"'):(m&&(t=new Blob([t],{type:n})),t instanceof Blob||(y=1),n=t.type||n):y=P.G("NotSupport-1",[g]),a.CLog(P("Wv7l::结束录音 编码花{1}ms 音频时长{2}ms 文件大小{3}b",0,Date.now()-r,s,w)+" "+g+","+n),y)h(1!=y?y:P("Vkbd::{1}编码器返回的不是{2}",0,c.type,p)+", "+g);else{if(c.takeoffEncodeChunk)a.CLog(P("QWnr::启用takeoffEncodeChunk后stop返回的blob长度为0不提供音频数据"),3);else if(w<Math.max(50,s/5))return void h(P("Sz2H::生成的{1}无效",0,c.type));e&&e(t,s,n),d()}};if(!a.isMock){var m=3==a.state;if(!a.state||m)return void h(P("wf9t::未开始录音")+(m?P("Dl2c::，开始录音前无用户交互导致AudioContext未运行"):""))}a._stop(!0);var y=a.recSize;if(y)if(a[c.type]){if(a.isMock){var w=a.envCheck(a.mockEnvInfo||{envName:"mock",canProcess:!1});if(w)return void h(P("AxOH::录音错误：")+w)}var b=a.engineCtx;if(a[c.type+"_complete"]&&b){var _=Math.round(b.pcmSize/c[f]*1e3);return r=Date.now(),void a[c.type+"_complete"](b,(function(e,t){g(e,t,_)}),h)}if(r=Date.now(),a.buffers[0]){var C=o.SampleData(a.buffers,a[u],c[f]);c[f]=C[f];var x=C.data;_=Math.round(x.length/c[f]*1e3),a.CLog(P("CxeT::采样:{1} 花:{2}ms",0,y+"->"+x.length,Date.now()-r)),setTimeout((function(){r=Date.now(),a[c.type](x,(function(e,t){g(e,t,_)}),(function(e){h(e)}))}))}else h(P("xkKd::音频buffers被释放"))}else h(P("xGuI::未加载{1}编码器，请尝试到{2}的src/engine内找到{1}的编码器并加载",0,c.type,l));else h(P("Ltz3::未采集到录音"))}};var D=function(e,t){t.pos||(t.pos=[0],t.tracks={},t.bytes=[]);var n=t.tracks,r=[t.pos[0]],a=function(){t.pos[0]=r[0]},o=t.bytes.length,s=new Uint8Array(o+e.length);if(s.set(t.bytes),s.set(e,o),t.bytes=s,!t._ht){if(E(s,r),z(s,r),!O(E(s,r),[24,83,128,103]))return;for(E(s,r);r[0]<s.length;){var i=E(s,r),l=z(s,r),c=[0],u=0;if(!l)return;if(O(i,[22,84,174,107])){for(;c[0]<l.length;){var v=E(l,c),p=z(l,c),d=[0],h={channels:0,sampleRate:0};if(O(v,[174]))for(;d[0]<p.length;){var g=E(p,d),m=z(p,d),y=[0];if(O(g,[215])){var w=U(m);h.number=w,n[w]=h}else if(O(g,[131]))1==(w=U(m))?h.type="video":2==w?(h.type="audio",u||(t.track0=h),h.idx=u++):h.type="Type-"+w;else if(O(g,[134])){for(var b="",_=0;_<m.length;_++)b+=String.fromCharCode(m[_]);h.codec=b}else if(O(g,[225]))for(;y[0]<m.length;){var C=E(m,y),x=z(m,y);if(O(C,[181])){w=0;var S=new Uint8Array(x.reverse()).buffer;4==x.length?w=new Float32Array(S)[0]:8==x.length?w=new Float64Array(S)[0]:T("WebM Track !Float",1,x),h[f]=Math.round(w)}else O(C,[98,100])?h.bitDepth=U(x):O(C,[159])&&(h.channels=U(x))}}}t._ht=1,T("WebM Tracks",n),a();break}}}var k=t.track0;if(k){var M=k[f];if(t.webmSR=M,16==k.bitDepth&&/FLOAT/i.test(k.codec)&&(k.bitDepth=32,T("WebM 16->32 bit",3)),M<8e3||32!=k.bitDepth||k.channels<1||!/(\b|_)PCM\b/i.test(k.codec))return t.bytes=[],t.bad||T("WebM Track Unexpected",3,t),t.bad=1,-1;for(var R=[],I=0;r[0]<s.length&&(v=E(s,r),p=z(s,r));){if(O(v,[163])){var L=15&p[0];if(!(h=n[L]))return T("WebM !Track"+L,1,n),-1;if(0===h.idx){var A=new Uint8Array(p.length-4);for(_=4;_<p.length;_++)A[_-4]=p[_];R.push(A),I+=A.length}}a()}if(I){var D=new Uint8Array(s.length-t.pos[0]);D.set(s.subarray(t.pos[0])),t.bytes=D,t.pos[0]=0,A=new Uint8Array(I),_=0;for(var N=0;_<R.length;_++)A.set(R[_],N),N+=R[_].length;if(S=new Float32Array(A.buffer),k.channels>1){var P=[];for(_=0;_<S.length;)P.push(S[_]),_+=k.channels;S=new Float32Array(P)}return S}}},O=function(e,t){if(!e||e.length!=t.length)return!1;if(1==e.length)return e[0]==t[0];for(var n=0;n<e.length;n++)if(e[n]!=t[n])return!1;return!0},U=function(e){for(var t="",n=0;n<e.length;n++){var r=e[n];t+=(r<16?"0":"")+r.toString(16)}return parseInt(t,16)||0},E=function(e,t,n){var r=t[0];if(!(r>=e.length)){var a=("0000000"+e[r].toString(2)).substr(-8),o=/^(0*1)(\d*)$/.exec(a);if(o){var s=o[1].length,i=[];if(!(r+s>e.length)){for(var l=0;l<s;l++)i[l]=e[r],r++;return n&&(i[0]=parseInt(o[2]||"0",2)),t[0]=r,i}}}},z=function(e,t){var n=E(e,t,1);if(n){var r=U(n),a=t[0],o=[];if(r<2147483647){if(a+r>e.length)return;for(var s=0;s<r;s++)o[s]=e[a],a++}return t[0]=a,o}},N=o.i18n={lang:"zh-CN",alias:{"zh-CN":"zh","en-US":"en"},locales:{},data:{},put:function(e,t){var n=l+".i18n.put: ",r=e.overwrite;r=null==r||r;var a=e.lang;if(!(a=N.alias[a]||a))throw new Error(n+"set.lang?");var o=N.locales[a];o||(o={},N.locales[a]=o);for(var s,i=/^([\w\-]+):/,c=0;c<t.length;c++){var u=t[c];if(s=i.exec(u)){var f=s[1];u=u.substr(f.length+1),!r&&o[f]||(o[f]=u)}else T(n+"'key:'? "+u,3,e)}},get:function(){return N.v_G.apply(null,arguments)},v_G:function(e,t,n){t=t||[],n=n||N.lang,n=N.alias[n]||n;var r=N.locales[n],a=r&&r[e]||"";return a||"zh"==n?(N.lastLang=n,"=Empty"==a?"":a.replace(/\{(\d+)(\!?)\}/g,(function(n,r,o){return n=t[(r=+r||0)-1],(r<1||r>t.length)&&(n="{?}",T("i18n["+e+"] no {"+r+"}: "+a,3)),o?"":n}))):"en"==n?N.v_G(e,t,"zh"):N.v_G(e,t,"en")},$T:function(){return N.v_T.apply(null,arguments)},v_T:function(){for(var e,t=arguments,n="",a=[],o=0,s=l+".i18n.$T:",i=/^([\w\-]*):/,c=0;c<t.length;c++){var u=t[c];if(0==c){if(!(n=(e=i.exec(u))&&e[1]))throw new Error(s+"0 'key:'?");u=u.substr(n.length+1)}if(-1===o)a.push(u);else{if(o)throw new Error(s+" bad args");if(0===u)o=-1;else if(r(u)){if(u<1)throw new Error(s+" bad args");o=u}else{var f=1==c?"en":c?"":"zh";if((e=i.exec(u))&&(f=e[1]||f,u=u.substr(e[1].length+1)),!e||!f)throw new Error(s+c+" 'lang:'?");N.put({lang:f,overwrite:!1},[n+":"+u])}}}return n?o>0?n:N.v_G(n,a):""}},P=N.$T;P.G=N.get,P("NonBrowser-1::非浏览器环境，不支持{1}",1),P("IllegalArgs-1::参数错误：{1}",1),P("NeedImport-2::调用{1}需要先导入{2}",2),P("NotSupport-1::不支持：{1}",1),o.TrafficImgUrl="//ia.51.la/go1?id=20469973&pvFlag=1";var F=o.Traffic=function(e){if(t){e=e?"/"+l+"/Report/"+e:"";var n=o.TrafficImgUrl;if(n){var r=o.Traffic,a=/^(https?:..[^\/#]*\/?)[^#]*/i.exec(location.href)||[],s=a[1]||"http://file/",i=(a[0]||s)+e;0==n.indexOf("//")&&(n=/^https:/i.test(i)?"https:"+n:"http:"+n),e&&(n=n+"&cu="+encodeURIComponent(s+e)),r[i]||(r[i]=1,(new Image).src=n,T("Traffic Analysis Image: "+(e||l+".TrafficImgUrl="+o.TrafficImgUrl)))}}};d&&(T(P("8HO5::覆盖导入{1}",0,l),1),d.Destroy()),e[l]=o}function G(e){var t=this;t.id=++A,F();var a={type:"mp3",onProcess:n};for(var o in e)a[o]=e[o];t.set=a;var s=a[v],i=a[f];(s&&!r(s)||i&&!r(i))&&t.CLog(P.G("IllegalArgs-1",[P("VtS4::{1}和{2}必须是数值",0,f,v)]),1,e),a[v]=+s||16,a[f]=+i||16e3,t.state=0,t._S=9,t.Sync={O:9,C:9}}}(D=A?window:Object,A),L.exports&&(L.exports=D.Recorder);const U=T(O.exports);function E(){return I().replace(/-/g,"")}!function(){var e="object"==typeof window&&!!window.document,t=(e?window:Object).Recorder,n=t.i18n;!function(e,t,n){e.prototype.enc_pcm={stable:!0,fast:!0,getTestMsg:function(){return n("fWsN::pcm为未封装的原始音频数据，pcm音频文件无法直接播放，可用Recorder.pcm2wav()转码成wav播放；支持位数8位、16位（填在比特率里面），采样率取值无限制")}};var r=function(t){var r=t.bitRate,a=8==r?8:16;r!=a&&e.CLog(n("uMUJ::PCM Info: 不支持{1}位，已更新成{2}位",0,r,a),3),t.bitRate=a};e.prototype.pcm=function(e,t,n){var o=this.set;r(o),t(a(e,o.bitRate).buffer,"audio/pcm")};var a=function(e,t){if(8==t)for(var n=e.length,r=new Uint8Array(n),a=0;a<n;a++){var o=128+(e[a]>>8);r[a]=o}else{e=new Int16Array(e);r=new Uint8Array(e.buffer)}return r};e.pcm2wav=function(t,r,a){t.blob||(t={blob:t});var o=t.blob,s=t.sampleRate||16e3,i=t.bitRate||16;if(t.sampleRate&&t.bitRate||e.CLog(n("KmRz::pcm2wav必须提供sampleRate和bitRate"),3),e.prototype.wav){var l=function(t,n){var o;if(8==i){var l=new Uint8Array(t);o=new Int16Array(l.length);for(var c=0;c<l.length;c++)o[c]=l[c]-128<<8}else o=new Int16Array(t);var u=e({type:"wav",sampleRate:s,bitRate:i});n&&(u.dataType="arraybuffer"),u.mock(o,s).stop((function(e,t,n){r(e,t,n)}),a)};if(o instanceof ArrayBuffer)l(o,1);else{var c=new FileReader;c.onloadend=function(){l(c.result)},c.readAsArrayBuffer(o)}}else a(n.G("NeedImport-2",["pcm2wav","src/engine/wav.js"]))},e.prototype.pcm_envCheck=function(e,t){return""},e.prototype.pcm_start=function(e){return r(e),{set:e,memory:new Uint8Array(5e5),mOffset:0}};var o=function(e,t){var n=t.length;if(e.mOffset+n>e.memory.length){var r=new Uint8Array(e.memory.length+Math.max(5e5,n));r.set(e.memory.subarray(0,e.mOffset)),e.memory=r}e.memory.set(t,e.mOffset),e.mOffset+=n};e.prototype.pcm_stop=function(e){e&&e.memory&&(e.memory=null)},e.prototype.pcm_encode=function(e,t){if(e&&e.memory){var n=e.set,r=a(t,n.bitRate);n.takeoffEncodeChunk?n.takeoffEncodeChunk(r):o(e,r)}},e.prototype.pcm_complete=function(e,t,r,a){e&&e.memory?(a&&this.pcm_stop(e),t(e.memory.buffer.slice(0,e.mOffset),"audio/pcm")):r(n("sDkA::pcm编码器未start"))}}(t,0,n.$T)}();class z{constructor(e={}){t(this,"websocket",null),t(this,"isRecording",!1),t(this,"options"),t(this,"audioQueue",[]),t(this,"lastDataTime",0),t(this,"isProcessing",!1),t(this,"results",[]),t(this,"recorder"),this.options=e}getResults(){return this.results.join(" ")}async connectWebSocket(){var e,t;const{appKey:r,token:a}=n.value;if(!r||!a)return void(null==(t=(e=this.options).onError)||t.call(e,"请先配置语音识别服务的 AppKey 和 Token"));const o=`wss://nls-gateway.cn-shanghai.aliyuncs.com/ws/v1?token=${a}`;this.websocket=new WebSocket(o),await new Promise((e=>{this.websocket.onopen=()=>{var t;const n={header:{appkey:r,namespace:"SpeechTranscriber",name:"StartTranscription",task_id:E(),message_id:E()},payload:{format:"pcm",sample_rate:16e3,enable_intermediate_result:!0,enable_punctuation_prediction:!0,enable_inverse_text_normalization:!0}};null==(t=this.websocket)||t.send(JSON.stringify(n)),console.log("发送消息",n),this.websocket.onmessage=t=>{var n,r;const a=JSON.parse(t.data);"TranscriptionStarted"===a.header.name?(console.log("语音识别服务连接成功"),e()):"SentenceBegin"===a.header.name?(console.log("检测到了一句话的开始",a.payload),this.results[a.payload.index]=a.payload.result):"TranscriptionResultChanged"===a.header.name?(console.log("识别结果发生了变化",a.payload),this.results[a.payload.index]=a.payload.result):"SentenceEnd"===a.header.name?(console.log("检测到了一句话的结束",a.payload),this.results[a.payload.index]=a.payload.result):"TranscriptionCompleted"===a.header.name&&console.log("已停止了语音转写",a.payload),console.log("收到消息",this.getResults()),null==(r=(n=this.options).onResult)||r.call(n,this.getResults())}}})),this.websocket.onerror=()=>{var e,t;null==(t=(e=this.options).onError)||t.call(e,"语音识别服务连接失败")},this.websocket.onclose=()=>{this.websocket=null}}async prepareRecording(){try{console.log("准备录音"),U.TrafficImgUrl=null,this.recorder=new U({type:"pcm",sampleRate:16e3,bitRate:16,onProcess:(e,t,n,r,a,o)=>{for(let s=a;s<e.length;s++)this.audioQueue.push(e[s]);this.lastDataTime=Date.now(),this.processQueue()}}),this.recorder.open((()=>{console.log("开始录音")}),((e,t)=>{console.log("录音失败",e,t)}))}catch(e){console.error(e)}}async processQueue(){var e;if(!this.isProcessing){for(this.isProcessing=!0;this.isRecording;)if(this.audioQueue.length>0){this.websocket||await this.connectWebSocket();const t=this.audioQueue.shift(),n=new ArrayBuffer(4+t.byteLength);new DataView(n).setUint32(0,t.byteLength,!1),new Int16Array(n,4).set(t),null==(e=this.websocket)||e.send(n),this.lastDataTime=Date.now()}else Date.now()-this.lastDataTime>5e3&&this.websocket&&(this.websocket.close(),this.websocket=null,console.warn("超时，关闭连接")),await new Promise((e=>setTimeout(e,100)));this.isProcessing=!1}}async startRecording(){var e,t,n;try{this.isRecording=!0,this.lastDataTime=Date.now(),null==(e=this.recorder)||e.start()}catch(r){console.error(r),null==(n=(t=this.options).onError)||n.call(t,"录音失败"),this.isRecording=!1}}async pauseRecording(){var e;this.isRecording=!1,null==(e=this.recorder)||e.pause(),this.websocket&&(this.websocket.close(),this.websocket=null)}async resumeRecording(){var e;this.isRecording=!0,null==(e=this.recorder)||e.resume()}stopRecording(){this.isRecording=!1,this.recorder&&this.recorder.stop(((e,t)=>{console.log("录音结束",e,t)}),(e=>{var t,n;console.error("录音结束失败",e),null==(n=(t=this.options).onError)||n.call(t,"录音结束失败")})),this.websocket&&(this.websocket.close(),this.websocket=null)}getRecordingStatus(){return this.isRecording}}const N=x(r({__name:"answer",setup(e){const t=a(null),n=a(""),r=a(""),x=a(!1),S=a(!1),k=a(!1),M=a(!1),R=a(null),I=a("");o((()=>{var e;const n=null==(e=f())?void 0:e.proxy,r=null==n?void 0:n.getOpenerEventChannel();r&&r.on?r.on("setQuestion",(e=>{t.value={content:e.question,difficulty:e.difficulty,category:e.category},M.value=e.isFollowUp||!1,T("text")})):s({url:"/pages/index/index"})}));const T=async e=>{var t;n.value=e,console.log("selectAnswerMode",e),"voice"===e&&(R.value||(R.value=new z({onResult:e=>{I.value=e,r.value=I.value},onError:e=>{_({title:e,icon:"none"})}})),await(null==(t=R.value)?void 0:t.prepareRecording()))},L=async()=>{t.value&&r.value.trim()?C({url:"/pages/question-bank/evaluation",success:e=>{var n,a,o;e.eventChannel.emit("evaluateAnswer",{question:null==(n=t.value)?void 0:n.content,answer:r.value,difficulty:null==(a=t.value)?void 0:a.difficulty,category:null==(o=t.value)?void 0:o.category,isFollowUp:M.value})}}):_({title:"请输入答案",icon:"none"})},A=async()=>{x.value||(x.value=!0,R.value&&(await R.value.startRecording(),S.value=!0))},D=async()=>{var e;S.value?R.value&&(R.value.pauseRecording(),S.value=!1):(S.value=!0,await(null==(e=R.value)?void 0:e.resumeRecording()))},O=async()=>{S.value&&(r.value.trim()?(R.value&&(R.value.stopRecording(),S.value=!1,x.value=!1),k.value=!0):_({title:"请继续答案",icon:"none"}))};return i((()=>{R.value&&(R.value.stopRecording(),R.value=null)})),(e,a)=>{const o=h,s=u,i=w,f=b;return v(),l(s,{class:"content"},{default:c((()=>[p(s,{class:"quiz-section"},{default:c((()=>[p(s,{class:"question-card"},{default:c((()=>[p(o,{class:"question-text"},{default:c((()=>{var e;return[g(m(null==(e=t.value)?void 0:e.content),1)]})),_:1}),M.value?d("",!0):(v(),l(s,{key:0,class:"question-info"},{default:c((()=>{var e;return[p(o,{class:y(["difficulty",null==(e=t.value)?void 0:e.difficulty])},{default:c((()=>{var e;return[g(m(null==(e=t.value)?void 0:e.difficulty),1)]})),_:1},8,["class"]),p(o,{class:"category"},{default:c((()=>{var e;return[g(m(null==(e=t.value)?void 0:e.category),1)]})),_:1})]})),_:1}))])),_:1}),p(s,{class:"answer-options"},{default:c((()=>[p(i,{class:"answer-btn text",onClick:a[0]||(a[0]=e=>T("text"))},{default:c((()=>[p(o,{class:"btn-text"},{default:c((()=>[g("文字回答")])),_:1})])),_:1}),p(i,{class:"answer-btn voice",onClick:a[1]||(a[1]=e=>T("voice"))},{default:c((()=>[p(o,{class:"btn-text"},{default:c((()=>[g("语音回答")])),_:1})])),_:1})])),_:1}),"text"===n.value?(v(),l(s,{key:0,class:"answer-container"},{default:c((()=>[p(s,{class:"answer-section"},{default:c((()=>[p(f,{class:"answer-input",modelValue:r.value,"onUpdate:modelValue":a[2]||(a[2]=e=>r.value=e),placeholder:"请输入你的答案...",maxlength:-1},null,8,["modelValue"])])),_:1}),p(s,{class:"submit-container"},{default:c((()=>[p(i,{class:"submit-btn",onClick:L},{default:c((()=>[g("提交答案")])),_:1})])),_:1})])),_:1})):"voice"===n.value?(v(),l(s,{key:1,class:"answer-section"},{default:c((()=>[I.value?(v(),l(s,{key:0,class:"recognition-result"},{default:c((()=>[p(o,{class:"result-text"},{default:c((()=>[g(m(I.value),1)])),_:1})])),_:1})):d("",!0),x.value?(v(),l(s,{key:1},{default:c((()=>[p(i,{class:y(["record-btn",{recording:S.value}]),onClick:D},{default:c((()=>[g(m(S.value?"暂停回答":"继续回答"),1)])),_:1},8,["class"]),p(i,{class:"record-btn stopped",onClick:O},{default:c((()=>[g(" 结束回答 ")])),_:1})])),_:1})):k.value?d("",!0):(v(),l(i,{key:2,class:y(["record-btn",{recording:S.value}]),onClick:A},{default:c((()=>[g(" 开始回答 ")])),_:1},8,["class"])),k.value?(v(),l(i,{key:3,class:"record-btn",onClick:L},{default:c((()=>[g(" 提交答案 ")])),_:1})):d("",!0)])),_:1})):d("",!0)])),_:1})])),_:1})}}}),[["__scopeId","data-v-67b31563"]]);export{N as default};
